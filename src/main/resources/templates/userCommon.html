<!DOCTYPE html>
<html lang="zh" xmlns:th="http://www.thymeleaf.org">
    <head>
        <title>饰品商城</title>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="description" content="Sublime project">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" type="text/css" href="/static/home/styles/bootstrap4/bootstrap.min.css">
        <link rel="stylesheet" type="text/css" href="/static/home/plugins/font-awesome-4.7.0/css/font-awesome.min.css">
        <link rel="stylesheet" type="text/css" href="/static/home/plugins/OwlCarousel2-2.2.1/owl.carousel.css">
        <link rel="stylesheet" type="text/css" href="/static/home/plugins/OwlCarousel2-2.2.1/owl.theme.default.css">
        <link rel="stylesheet" type="text/css" href="/static/home/plugins/OwlCarousel2-2.2.1/animate.css">
        <link rel="stylesheet" type="text/css" href="/static/home/styles/main_styles.css">
        <link rel="stylesheet" type="text/css" href="/static/home/styles/responsive.css">
        <!--bootstrap样式-->

    </head>
    <body>
        <div class="super_container">
            <!-- Header -->
            <header class="header" th:fragment="Header">
                <div class="header_container">
                    <div class="container">
                        <div class="row">
                            <div class="col">
                                <div class="header_content d-flex flex-row align-items-center justify-content-start">
                                    <div class="logo">
                                        <a th:href="@{/home}">饰品商城</a>
                                    </div>

                                    <nav class="main_nav">
                                        <ul>

                                            <li class="active">
                                                <a th:href="@{/home}">主页</a>
                                            </li>
                                            <li class="hassubs">
                                                <a href="#" style="width: 70px;display: block">分类</a>
                                                <ul id="categories">

                                                </ul>
                                            </li>
                                            <li><a href="/roll">抽奖</a></li>
                                            <li><a href="contact.html">联系</a></li>
                                            <li>
                                                <a href="#" th:if="${session.loggedUser != null}" th:text="${session.loggedUser.nickName}" th:href="@{/personCenter}"></a>
                                                <a href="#" th:if="${session.loggedUser == null}" th:href="@{/login}">登录/注册</a>
                                            </li>
                                            <li><a href="/logout" th:if="${session.loggedUser != null}">退出登陆</a></li>
                                        </ul>
                                    </nav>
                                    <div class="header_extra ml-auto">
                                        <div class="shopping_cart">
                                            <a th:href="@{/cart}">
                                                <svg version="1.1" xmlns="http://www.w3.org/2000/svg"
                                                     xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                                                     viewBox="0 0 489 489" style="enable-background:new 0 0 489 489;"
                                                     xml:space="preserve">
											<g>
												<path d="M440.1,422.7l-28-315.3c-0.6-7-6.5-12.3-13.4-12.3h-57.6C340.3,42.5,297.3,0,244.5,0s-95.8,42.5-96.6,95.1H90.3
													c-7,0-12.8,5.3-13.4,12.3l-28,315.3c0,0.4-0.1,0.8-0.1,1.2c0,35.9,32.9,65.1,73.4,65.1h244.6c40.5,0,73.4-29.2,73.4-65.1
													C440.2,423.5,440.2,423.1,440.1,422.7z M244.5,27c37.9,0,68.8,30.4,69.6,68.1H174.9C175.7,57.4,206.6,27,244.5,27z M366.8,462
													H122.2c-25.4,0-46-16.8-46.4-37.5l26.8-302.3h45.2v41c0,7.5,6,13.5,13.5,13.5s13.5-6,13.5-13.5v-41h139.3v41
													c0,7.5,6,13.5,13.5,13.5s13.5-6,13.5-13.5v-41h45.2l26.9,302.3C412.8,445.2,392.1,462,366.8,462z"/>
											</g>
										</svg>
                                                <div>购物车 <span id="cartCount">(0)</span></div>
                                            </a>
                                        </div>
                                        <div class="search">
                                            <div class="search_icon">
                                                <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg"
                                                     xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                                                     viewBox="0 0 475.084 475.084"
                                                     style="enable-background:new 0 0 475.084 475.084;"
                                                     xml:space="preserve">
										<g>
											<path d="M464.524,412.846l-97.929-97.925c23.6-34.068,35.406-72.047,35.406-113.917c0-27.218-5.284-53.249-15.852-78.087
												c-10.561-24.842-24.838-46.254-42.825-64.241c-17.987-17.987-39.396-32.264-64.233-42.826
												C254.246,5.285,228.217,0.003,200.999,0.003c-27.216,0-53.247,5.282-78.085,15.847C98.072,26.412,76.66,40.689,58.673,58.676
												c-17.989,17.987-32.264,39.403-42.827,64.241C5.282,147.758,0,173.786,0,201.004c0,27.216,5.282,53.238,15.846,78.083
												c10.562,24.838,24.838,46.247,42.827,64.234c17.987,17.993,39.403,32.264,64.241,42.832c24.841,10.563,50.869,15.844,78.085,15.844
												c41.879,0,79.852-11.807,113.922-35.405l97.929,97.641c6.852,7.231,15.406,10.849,25.693,10.849
												c9.897,0,18.467-3.617,25.694-10.849c7.23-7.23,10.848-15.796,10.848-25.693C475.088,428.458,471.567,419.889,464.524,412.846z
												 M291.363,291.358c-25.029,25.033-55.148,37.549-90.364,37.549c-35.21,0-65.329-12.519-90.36-37.549
												c-25.031-25.029-37.546-55.144-37.546-90.36c0-35.21,12.518-65.334,37.546-90.36c25.026-25.032,55.15-37.546,90.36-37.546
												c35.212,0,65.331,12.519,90.364,37.546c25.033,25.026,37.548,55.15,37.548,90.36C328.911,236.214,316.392,266.329,291.363,291.358z
												"/>
										</g>
									</svg>
                                            </div>
                                        </div>
                                        <div class="hamburger"><i class="fa fa-bars" aria-hidden="true"></i></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Search Panel -->
                <div class="search_panel trans_300">
                    <div class="container">
                        <div class="row">
                            <div class="col">
                                <div class="search_panel_content d-flex flex-row align-items-center justify-content-end">
                                    <form action="/searchGoodsByName" id="searchForm" method="get">
                                        <div class="btn-group" >
                                            <button type="button" class="btn btn-danger dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                                按商品名搜索
                                            </button>
                                            <div class="dropdown-menu">
                                                <a class="dropdown-item" href="#" search-url="/searchGoodsByName" >按商品名搜索</a>
                                                <div class="dropdown-divider"></div>
                                                <a class="dropdown-item" href="#" search-url="/searchTickersByGoodsName" th:if="${session.loggedUser!=null}">搜索订单</a>

                                            </div>
                                        </div>
                                        <input type="text" class="search_input" placeholder="Search"
                                               required="required" style="margin: 30px" name="content">
                                        <button class="btn btn-outline-success my-2 my-sm-0" type="submit">搜索</button>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="header_social">
                    <ul>
                        <li>
                            <a href="#" >
                            <img  class="img-circle" th:if="${session.loggedUser != null}" th:src="${session.loggedUser.image}"  style="border-radius: 100%;max-width: 80px;max-height: 80px;margin-right: 100px">
                            </a>
                        </li>
<!--                        <li><a href="#"><i class="fa fa-instagram" aria-hidden="true"></i></a></li>-->
<!--                        <li><a href="#"><i class="fa fa-facebook" aria-hidden="true"></i></a></li>-->
<!--                        <li><a href="#"><i class="fa fa-twitter" aria-hidden="true"></i></a></li>-->
                    </ul>
                </div>

            </header>


            <!-- Ads -->


            <!-- Products -->

            <div class="products">
                <div class="container">
                    <div class="row">
                        <div class="col">
                            <div class="product_grid">
                                <!-- Product -->
                                <div class="product">
                                    <div class="product_image"><img src="/static/images/product/product_1.png" alt="">
                                    </div>
                                    <div class="product_extra product_level_6"><a href="categories.html">sss</a></div>
                                    <div class="product_content">
                                        <div class="product_title"><a href="product.html">折叠刀（★） | 多普勒</a></div>
                                        <div class="product_price">$226</div>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>

            <!-- Ad -->

            <div class="avds_xl" th:fragment="Ads">
                <div class="container">
                    <div class="row">
                        <div class="col">
                            <div class="avds_xl_container clearfix">
                                <div class="avds_xl_background"
                                     style="background-image:url(/static/home/images/avds_xl.jpg)"></div>
                                <div class="avds_xl_content">
                                    <div class="avds_title">广告位招租</div>
                                    <div class="avds_text">Lorem ipsum dolor sit amet, consectetur adipiscing elit.
                                        Nullam a ultricies metus.
                                    </div>
                                    <div class="avds_link avds_xl_link"><a href="categories.html">See More</a></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Icon Boxes -->

            <div class="icon_boxes" th:fragment="IconBoxes">
                <div class="container">
                    <div class="row icon_box_row">

                        <!-- Icon Box -->
                        <div class="col-lg-4 icon_box_col">
                            <div class="icon_box">
                                <div class="icon_box_image"><img src="/static/home/images/icon_1.svg" alt=""></div>
                                <div class="icon_box_title">全球服务支持</div>
                                <div class="icon_box_text">
                                    <p>我们将对世界各地的用户提供服务</p>
                                </div>
                            </div>
                        </div>

                        <!-- Icon Box -->
                        <div class="col-lg-4 icon_box_col">
                            <div class="icon_box">
                                <div class="icon_box_image"><img src="/static/home/images/icon_2.svg" alt=""></div>
                                <div class="icon_box_title">7天无理由退货</div>
                                <div class="icon_box_text">
                                    <p>您购买的商品可以在7天之内无理由退货</p>
                                </div>
                            </div>
                        </div>

                        <!-- Icon Box -->
                        <div class="col-lg-4 icon_box_col">
                            <div class="icon_box">
                                <div class="icon_box_image"><img src="/static/home/images/icon_3.svg" alt=""></div>
                                <div class="icon_box_title">24小时服务支持</div>
                                <div class="icon_box_text">
                                    <p>我们将24小时竭诚为您服务</p>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>

            <!-- Newsletter -->

            <div class="newsletter" th:fragment="Newsletter">
                <div class="container">
                    <div class="row">
                        <div class="col">
                            <div class="newsletter_border"></div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-lg-8 offset-lg-2">
                            <div class="newsletter_content text-center">
                                <div class="newsletter_title">订阅我们的新闻</div>
                                <div class="newsletter_text"><p>您将获取关于我们的最新消息</p></div>
                                <div class="newsletter_form_container">
                                    <form action="#" id="newsletter_form" class="newsletter_form">
                                        <input type="email" class="newsletter_input" required="required">
                                        <button class="newsletter_button trans_200"><span>订阅</span></button>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Footer -->

            <div class="footer_overlay" ></div>
            <footer class="footer" th:fragment="Footer">
                <div class="footer_background" style="background-image:url(/static/home/images/footer.jpg)"></div>
                <div class="container">
                    <div class="row">
                        <div class="col">
                            <div class="footer_content d-flex flex-lg-row flex-column align-items-center justify-content-lg-start justify-content-center">
                                <div class="footer_logo"><a href="#">饰品商城</a></div>
                                <div class="copyright ml-auto mr-auto">
                                    <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
                                    Copyright &copy;<script>document.write(new Date().getFullYear());</script>
                                    All rights reserved | This project is put on <i class="fa fa-heart-o"
                                                                                    aria-hidden="true"></i> <a href="#"
                                                                                                               target="_blank">xiaosx</a>
                                    <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
                                </div>
                                <div class="footer_social ml-lg-auto">
                                    <ul>
                                        <li><a href="#"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li>
                                        <li><a href="#"><i class="fa fa-instagram" aria-hidden="true"></i></a></li>
                                        <li><a href="#"><i class="fa fa-facebook" aria-hidden="true"></i></a></li>
                                        <li><a href="#"><i class="fa fa-twitter" aria-hidden="true"></i></a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </footer>
        </div>
        <!--模态框-->
        <div th:fragment="center-modal" class="modal fade"  id="myModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <!--标题-->
                        <h5 class="modal-title" id="modalTitle"></h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <!--内容-->

                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary close-btn" data-dismiss="modal">关闭</button>
                        <button type="button" class="btn btn-primary account-save-btn">保存</button>
                    </div>
                </div>
            </div>
        </div>


        <script src="/static/home/js/jquery-3.2.1.min.js"></script>
        <script src="/static/home/styles/bootstrap4/popper.js"></script>
        <script src="/static/home/styles/bootstrap4/bootstrap.min.js"></script>
        <script src="/static/home/plugins/greensock/TweenMax.min.js"></script>
        <script src="/static/home/plugins/greensock/TimelineMax.min.js"></script>
        <script src="/static/home/plugins/scrollmagic/ScrollMagic.min.js"></script>
        <script src="/static/home/plugins/greensock/animation.gsap.min.js"></script>
        <script src="/static/home/plugins/greensock/ScrollToPlugin.min.js"></script>
        <script src="/static/home/plugins/OwlCarousel2-2.2.1/owl.carousel.js"></script>
        <script src="/static/home/plugins/Isotope/isotope.pkgd.min.js"></script>
        <script src="/static/home/plugins/easing/easing.js"></script>
        <script src="/static/home/plugins/parallax-js-master/parallax.min.js"></script>
        <script src="/static/home/js/custom.js"></script>
        <script type="text/javascript" th:fragment="categoties">
            $('.popover-dismiss').popover({
                trigger: 'focus'
            })
            /*获取商品类别*/
            $(function () {
                var categories;
                $.ajax({
                    url: "/getActivatedType",
                    dataType: "json",
                    type: "post",
                    success: function (result) {
                        categories = result.data.types;
                        for (var i = 0; i < categories.length; i++) {
                            var li = inertCategory(categories[i].id, categories[i].name)
                            $("#categories").append(li);
                        }
                    },
                    error: function (result) {
                        console.log(result);
                        console.log("error");
                    }
                });

                <!--购物车数量-->
                $.ajax({
                    url:'/selectCartCount',
                    type:'post',
                    success:function (result) {
                        if (result.state==1){
                            $("#cartCount").html('(' + result.data + ')');
                        }else {
                            $("#cartCount").html('(0)');
                        }

                    },
                    error:function (){
                        alert("您的网路异常");
                    }
                });
            })

            function inertCategory(type, name) {
                var html = '<li role="separator" class="divider"><a style="width: 70px;display: block" href="/showGoodsByType?page=1&type=' + type + '">' + name + '</a></li>';
                return html;
            }


           $(".dropdown-item").click(function () {
               var url = $(this).attr("search-url");
               var typeName = $(this).text();
               console.log(url,typeName);
               $(".btn.btn-danger.dropdown-toggle").html(typeName)
               $("#searchForm").attr("action",url);
           });

        </script>
    </body>
</html>